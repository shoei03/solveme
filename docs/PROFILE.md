# プロフィール画面

## 概要

SolveMe アプリのプロフィール画面は、ユーザーの個人情報や活動統計を表示・編集する機能を提供します。

## 主な機能

### 1. プロフィール情報表示

- **アバター画像**: Firebase Auth のプロフィール画像、または既定のアイコン
- **ユーザー名**: ディスプレイネーム
- **メールアドレス**: 登録時のメール
- **参加日**: アカウント作成日
- **自己紹介**: ユーザーが設定した自己紹介文

### 2. 活動統計

- **投稿数**: ユーザーが投稿した悩みの数
- **回答数**: 他のユーザーの悩みに対する回答数
- **ベストアンサー数**: 選ばれたベストアンサーの数
- **役に立った数**: 他のユーザーから「役に立った」と評価された数

### 3. 最近のアクティビティ

- **投稿履歴**: 最近の投稿一覧
- **回答履歴**: 最近の回答一覧
- **日時順表示**: 最新の活動から順番に表示

### 4. プロフィール編集

- **ユーザー名変更**: ディスプレイネームの編集
- **自己紹介編集**: 自己紹介文の追加・編集
- **リアルタイムバリデーション**: 入力内容の即座チェック

### 5. アカウント管理

- **ログアウト機能**: 確認ダイアログ付きの安全なログアウト
- **データ更新**: プルダウンリフレッシュによるデータ再読み込み

## 画面構成

### ヘッダー

```
[プロフィール]                    [編集][ログアウト]
```

### プロフィールセクション

```
[アバター画像]  [ユーザー名]
               [メールアドレス]
               [参加日]

[自己紹介]
───────────────────
```

### 統計セクション

```
活動統計
[投稿数] [回答数] [ベストアンサー] [役に立った]

最近のアクティビティ
• [投稿] タイトル - 日時
• [回答] タイトル - 日時
```

## 技術実装

### 使用コンポーネント

- `ProfileStats`: 統計情報とアクティビティ表示
- `ProfileEdit`: プロフィール編集フォーム
- `ValidatedInput`: バリデーション付き入力フィールド
- `ValidatedTextArea`: バリデーション付きテキストエリア

### データソース

- **Firebase Auth**: ユーザーアカウント情報
- **Firestore**: プロフィール詳細情報、統計データ、アクティビティ

### バリデーション

- **ユーザー名**: 2-30 文字、特殊文字制限
- **自己紹介**: 500 文字以内、任意入力

## ナビゲーション

### タブ構成

```
[Home] [Explore] [Profile]
```

### 画面遷移

- **プロフィール表示** ↔ **プロフィール編集**
- **ログアウト** → **認証画面**

## 今後の拡張予定

### プロフィール画像機能

- 画像アップロード機能
- 画像サイズ調整
- Firebase Storage との連携

### 詳細統計

- 月別/年別統計
- カテゴリ別投稿数
- 評価履歴

### ソーシャル機能

- フォロー/フォロワー
- 他ユーザーのプロフィール閲覧
- メッセージ機能

## 関連ファイル

### 画面ファイル

- `app/(tabs)/profile.tsx` - メインプロフィール画面
- `components/profile/ProfileStats.tsx` - 統計表示コンポーネント
- `components/profile/ProfileEdit.tsx` - 編集フォームコンポーネント

### サービス

- `services/profileService.ts` - プロフィールデータ管理
- `services/authService.ts` - 認証機能
- `contexts/AuthContext.tsx` - 認証状態管理

### バリデーション

- `utils/validation.ts` - バリデーション関数
- `hooks/useForm.ts` - フォーム管理フック

## 使用方法

1. **アプリ起動後、「Profile」タブをタップ**
2. **プロフィール情報の確認**
   - アバター、ユーザー名、統計情報を確認
3. **編集したい場合**
   - 右上の編集ボタン（鉛筆アイコン）をタップ
   - ユーザー名や自己紹介を編集
   - 保存ボタンで変更を確定
4. **データ更新**
   - 画面を下にプルして最新データを取得
5. **ログアウト**
   - 右上のログアウトボタンをタップ
   - 確認ダイアログで「ログアウト」を選択

これでプロフィール画面の実装が完了しました。ユーザーは自分の情報を確認・編集し、活動統計を把握できるようになります。
